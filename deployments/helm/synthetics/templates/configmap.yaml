apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "synthetics.fullname" . }}
  labels:
    {{- include "synthetics.labels" . | nindent 4 }}
data:
  config.yaml: |
    satellite:
      access_grant: "${STORJ_ACCESS_GRANT}"
      bucket: {{ .Values.storj.bucket | quote }}

    s3:
      endpoint: {{ .Values.s3.endpoint | quote }}
      access_key: "${S3_ACCESS_KEY}"
      secret_key: "${S3_SECRET_KEY}"
      region: {{ .Values.s3.region | quote }}

    k6:
      binary_path: {{ .Values.config.k6.binaryPath | quote }}
      output_format: {{ .Values.config.k6.outputFormat | quote }}

    metrics:
      port: {{ .Values.config.metrics.port }}
      path: {{ .Values.config.metrics.path | quote }}

    logging:
      level: {{ .Values.config.logging.level | quote }}
      format: {{ .Values.config.logging.format | quote }}

    jitter:
      enabled: {{ .Values.config.jitter.enabled }}
      max: {{ .Values.config.jitter.max | quote }}

    tests:
{{ toYaml .Values.config.tests | indent 6 }}
